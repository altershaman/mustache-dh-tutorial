# Вложенные контексты
В этом уроке разбираем как интерполировать значения вложенных контекстов.

В предыдущих уроках мы видели, что иногда интерполируется вложенный контекст в виде `[object Object]`. Это происходит всякий раз, когда mustach пытается интерполировать значение, которое является объектом (словарем). Он "не знает" точного пути до простого значения, поэтому такой путь необходимо указать -- \{\{<context_name|.>\}\}





###### Интерполяция
---

###### Значение корневого контекста \{\{.\}\}:
{{.}}

###### Значение вложенного контекста \{\{key1\}\}:
{{key1}}

###### Значение вложенного контекста \{\{key2\}\}:
{{key2}}

###### Значение вложенного контекста \{\{key2.key2_1\}\}:
{{key2.key2_1}}

###### Значение вложенного контекста \{\{key3\}\}:
{{key3}}

### Задание "Интерполяция вложенных контекстов"

  * Откройте для редактирования файл mustache/presentations.yaml
  * Найдите участок кода, отвечающий за формирование данной презентации
    ```yaml

    entities:
      noname:
        presentations:

    ...
          nested_contexts:
            type: markdown
            template: templates/nested_contexts.md
            source: > # код презентации
              ( 
                {"key1": "value1",
                 "key2": {
                  "key2_1": "value2_1"}
                }
              )
    ```
  * В примере мы передаем в шаблон (данный шаблон) объект:
      * корневой контекст интерполируется как `[object Object]`
      * контекст "key1" -- "value1", поскольку `key1` имеет простое значение `value1`
      * контекст "key2" -- `[object Object]`, поскольку `key2` -- объект
      * контекст "key2.key2_1" -- "value2_1, поскольку `ey2.key2_1`имеет простое значение `value2_1`
      * контекст "key3" -- интерполируется пустое значение, поскольку такого контекста нет
  * Добавьте позитивный и негативный mustaches для контекста "key3" -- срабатывает негативный mustache^

    \{\{#key3\}\}

    \{\{.\}\} -- :warning: текущий контекст "key3"

    \{\{/key3\}\}
    
    \{\{^key3\}\}

    нет такого ключа

    \{\{/key3\}\}

  * Добавьте `"key3": "value3"` в результат выполнения кода презентации -- срабатывает позитивный mustache
  * Измените значение "key3" на пустую строку -- снова срабатывает негативный mustache, но не вполне корректно (ведь "key3" существует)
  * Добавим обработку пустого значения "key3":

    \{\{^key3\}\}

    \{\{#.\}\}пустое значение\{\{/.\}\}

    \{\{^.\}\}нет такого ключа\{\{/.\}\}

    \{\{/key3\}\}


      


### Take away
1. К значению контекста, являющимся атрибутом объекта  можно обратиться по имени атрибута, описав "путь" как в обычных языках программирования от корневого контекста "через точку"
1. Обращение к несуществующему ключу интерполирует пустое значение
1. Обращение к существующему ключу с пустым значением интерполирует пустое значение
1. Позитивный/негативный mustaches смещают текущий контекст